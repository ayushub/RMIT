/* Users */
CREATE TABLE APP.USERS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
USER_ID CHAR(8) NOT NULL, -- /* EMPLOYEE_ID or CUSTOMER_ID */
USER_PASSWORD CHAR(8) NOT NULL,
USER_NAME VARCHAR(25) NOT NULL,
USER_TYPE VARCHAR(10),
STATUS CHAR(1) NOT NULL DEFAULT 'A'
);

/* Employees */
CREATE TABLE APP.EMPLOYEES (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
EMPLOYEE_ID CHAR(6) NOT NULL,
FIRST_NAME VARCHAR(25) NOT NULL,
LAST_NAME VARCHAR(25) NOT NULL,
DOB DATE, 
ADDRESS VARCHAR(50)
);

/* Customers */
CREATE TABLE APP.CUSTOMERS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
CUSTOMER_ID CHAR(8) NOT NULL, 
FIRST_NAME VARCHAR(25) NOT NULL,
LAST_NAME VARCHAR(25) NOT NULL,
DOB DATE, 
ADDRESS VARCHAR(50)
);

/* New fields added for customer creation screen wizard */
ALTER TABLE APP.CUSTOMERS ADD CURRENT_JOB VARCHAR(25);
ALTER TABLE APP.CUSTOMERS ADD COMPANY_NAME VARCHAR(25);
ALTER TABLE APP.CUSTOMERS ADD SALARY_PER_YEAR NUMERIC(19, 4);
ALTER TABLE APP.CUSTOMERS ADD CONTACT_METHOD VARCHAR(25); -- E-mail, Phone, Mail

/* Accounts */
CREATE TABLE APP.ACCOUNTS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
CUSTOMER_KEY INT NOT NULL REFERENCES CUSTOMERS, 
--CUSTOMER_ID CHAR(8) NOT NULL, 
ACCOUNT_NUMBER CHAR(8) NOT NULL, 
ACCOUNT_TYPE VARCHAR(15),
STATUS CHAR(1)
);

/* Savings */
CREATE TABLE APP.SAVINGS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
ACCOUNT_KEY INT NOT NULL REFERENCES ACCOUNTS, 
--ACCOUNT_NUMBER CHAR(8) NOT NULL, 
BALANCE NUMERIC(19, 4)
);

/* HomeLoan */
CREATE TABLE APP.HOME_LOAN (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
ACCOUNT_KEY INT NOT NULL REFERENCES ACCOUNTS, 
--ACCOUNT_NUMBER CHAR(8) NOT NULL, 
AMOUNT_BORROWED NUMERIC(19, 4),
AMOUNT_REPAYED NUMERIC(19, 4)
);

/* CreditCard */
CREATE TABLE APP.CREDIT_CARD (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
ACCOUNT_KEY INT NOT NULL REFERENCES ACCOUNTS, 
--ACCOUNT_NUMBER CHAR(8) NOT NULL,  
CREDIT_CARD_NUMBER CHAR(16) NOT NULL, 
CREDIT_LIMIT NUMERIC(19, 4),
CREDIT NUMERIC(19, 4)
);

/* CreditCardTransactions */
CREATE TABLE APP.CREDIT_CARD_TRANSACTIONS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
CREDIT_CARD_KEY INT NOT NULL REFERENCES CREDIT_CARD, 
--CREDIT_CARD_NUMBER CHAR(16) NOT NULL, 
DESCRIPTION VARCHAR(50),
AMOUNT NUMERIC(19, 4)
);

/* SavingsTransactions */
CREATE TABLE APP.SAVINGS_TRANSACTIONS (
ID INT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
ACCOUNT_KEY INT NOT NULL REFERENCES ACCOUNTS, 
CATEGORY VARCHAR(10) -- Deposit / Withdrawal
DESCRIPTION VARCHAR(50),
AMOUNT NUMERIC(19, 4)
);